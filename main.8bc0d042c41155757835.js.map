{"version":3,"file":"main.8bc0d042c41155757835.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/utils/request.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/utils/utils.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// Функции для работы с модальными окнами\n\n// Открывает попап и навешивает слушатели Esc, overlay, крестик\nexport function openModal(popupElement) {\n  popupElement.classList.add(\"popup_is-animated\"); // сначала анимация\n  setTimeout(() => {\n    popupElement.classList.add(\"popup_is-opened\"); // потом только открытие\n  }, 1);\n  document.addEventListener(\"keydown\", onEscapeKey);\n  popupElement.addEventListener(\"mousedown\", onOverlayClick);\n}\n\n// Закрывает попап и снимает слушатели\nexport function closeModal(popupElement) {\n  popupElement.classList.remove(\"popup_is-opened\");\n  // Ждём окончания анимации, затем убираем анимационный класс\n  setTimeout(() => {\n    popupElement.classList.remove(\"popup_is-animated\");\n  }, 600); // 600ms — как в transition в CSS\n  document.removeEventListener(\"keydown\", onEscapeKey);\n  popupElement.removeEventListener(\"mousedown\", onOverlayClick);\n}\n\n// Обработчик Esc\nfunction onEscapeKey(event) {\n  if (event.key === \"Escape\") {\n    const activePopup = document.querySelector(\".popup_is-opened\");\n    if (activePopup) closeModal(activePopup);\n  }\n}\n\n// Обработчик клика по оверлею\nfunction onOverlayClick(event) {\n  if (event.target.classList.contains(\"popup_is-opened\")) {\n    closeModal(event.target);\n  }\n}","// Обработка ответа от fetch\nfunction checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\n// Функция для создания универсального запроса с базовым URL\nexport function createRequest(baseUrl) {\n  return function request(endpoint, options) {\n    return fetch(baseUrl + endpoint, options).then(checkResponse);\n  };\n}","import { createRequest } from \"../utils/request.js\";\n\nconst baseUrl = \"https://mesto.nomoreparties.co/v1/wff-cohort-41\";\nconst request = createRequest(baseUrl);\n\nclass Api {\n  constructor({ headers }) {\n    this._headers = headers;\n  }\n\n  getUserInfo() {\n    return request(\"/users/me\", { headers: this._headers });\n  }\n\n  getInitialCards() {\n    return request(\"/cards\", { headers: this._headers });\n  }\n\n  updateUserInfo({ name, about }) {\n    return request(\"/users/me\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({ name, about }),\n    });\n  }\n\n  addCard({ name, link }) {\n    return request(\"/cards\", {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ name, link }),\n    });\n  }\n\n  deleteCard(cardId) {\n    return request(`/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    });\n  }\n\n  likeCard(cardId) {\n    return request(`/cards/likes/${cardId}`, {\n      method: \"PUT\",\n      headers: this._headers,\n    });\n  }\n\n  unlikeCard(cardId) {\n    return request(`/cards/likes/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    });\n  }\n\n  updateAvatar({ avatar }) {\n    return request(\"/users/me/avatar\", {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({ avatar }),\n    });\n  }\n}\n\nconst api = new Api({\n  headers: {\n    authorization: \"9b711e70-0272-4e5c-944b-5407ffffd0b3\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n","import api from \"./api.js\";\n\n// Шаблон карточки ищем один раз\nconst cardTemplateElement = document\n  .querySelector(\"#card-template\")\n  .content.querySelector(\".card\");\n\nexport function handleLike(cardId, likeButton, likeCount, isLiked, currentUserId) {\n  const apiMethod = isLiked ? api.unlikeCard : api.likeCard;\n  apiMethod\n    .call(api, cardId)\n    .then((updatedCard) => {\n      likeButton.classList.toggle(\n        \"card__like-button_is-active\",\n        updatedCard.likes.some((user) => user._id === currentUserId)\n      );\n      likeCount.textContent = updatedCard.likes.length;\n    })\n    .catch(console.error);\n}\n\nexport function handleDelete(cardElement, cardId) {\n  return api.deleteCard(cardId)\n    .then(() => {\n      cardElement.remove();\n    })\n    .catch(console.error);\n}\n\nexport function createCard(\n  data,\n  { onImageClick, currentUserId }\n) {\n  const cardElement = cardTemplateElement.cloneNode(true);\n  const imageElement = cardElement.querySelector(\".card__image\");\n  const titleElement = cardElement.querySelector(\".card__title\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const likeCount = cardElement.querySelector(\".card__like-count\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n\n  titleElement.textContent = data.name;\n  imageElement.src = data.link;\n  imageElement.alt = data.name;\n\n  // Показываем количество лайков\n  likeCount.textContent = data.likes.length;\n\n  // Отображаем активный лайк, если пользователь уже лайкнул\n  const isLiked = data.likes.some((user) => user._id === currentUserId);\n  if (isLiked) {\n    likeButton.classList.add(\"card__like-button_is-active\");\n  }\n\n  // Показываем корзину только на своих карточках\n  if (!data.owner || data.owner._id !== currentUserId) {\n    deleteButton.style.display = \"none\";\n  } else {\n    deleteButton.addEventListener(\"click\", () =>\n      handleDelete(cardElement, data._id)\n    );\n  }\n\n  likeButton.addEventListener(\"click\", () =>\n    handleLike(\n      data._id,\n      likeButton,\n      likeCount,\n      likeButton.classList.contains(\"card__like-button_is-active\"),\n      currentUserId\n    )\n  );\n  imageElement.addEventListener(\"click\", () => onImageClick(data));\n\n  return cardElement;\n}\n\nexport function deleteCard(cardElement) {\n  cardElement.remove();\n}\n\nexport function toggleCardLike(likeButton) {\n  likeButton.classList.toggle(\"card__like-button_is-active\");\n}\n","// Функция показа ошибки\nconst showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  validationConfig\n) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(validationConfig.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(validationConfig.errorClass);\n};\n\n// Функция скрытия ошибки\nconst hideInputError = (formElement, inputElement, validationConfig) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  errorElement.classList.remove(validationConfig.errorClass);\n  errorElement.textContent = \"\";\n};\n\n// Функция проверки валидности поля\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      validationConfig\n    );\n  } else {\n    hideInputError(formElement, inputElement, validationConfig);\n  }\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  });\n};\n\n// Функция переключения состояния кнопки\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\n  const hasInvalidInput = inputList.some(\n    (inputElement) => !inputElement.validity.valid\n  );\n  buttonElement.disabled = hasInvalidInput;\n  buttonElement.classList.toggle(\n    validationConfig.inactiveButtonClass,\n    hasInvalidInput\n  );\n};\n\n// Функция установки слушателей событий\nconst setEventListeners = (formElement, validationConfig) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, validationConfig);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n};\n\n// Функция очистки ошибок валидации\nconst clearValidation = (formElement, validationConfig) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationConfig.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationConfig.submitButtonSelector\n  );\n\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, validationConfig);\n  });\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n};\n\n// Функция включения валидации\nconst enableValidation = (validationConfig) => {\n  const formList = Array.from(\n    document.querySelectorAll(validationConfig.formSelector)\n  );\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, validationConfig);\n  });\n};\n\nexport { enableValidation, clearValidation };\n","// Универсальная функция управления текстом кнопки\nexport function renderLoading(\n  isLoading,\n  button,\n  buttonText = \"Сохранить\",\n  loadingText = \"Сохранение...\"\n) {\n  button.textContent = isLoading ? loadingText : buttonText;\n}\n\n// Универсальная функция обработки сабмита формы\nexport function handleSubmit(request, evt, loadingText = \"Сохранение...\") {\n  evt.preventDefault();\n  const submitButton = evt.submitter;\n  const initialText = submitButton.textContent;\n  renderLoading(true, submitButton, initialText, loadingText);\n  request()\n    .then(() => {\n      evt.target.reset();\n    })\n    .catch(console.error)\n    .finally(() => {\n      renderLoading(false, submitButton, initialText);\n    });\n}\n\n// Универсальная функция вставки карточки\nexport function renderCard(item, callbacks, container, method = \"prepend\") {\n  const cardElement = callbacks.createCard(item, callbacks);\n  container[method](cardElement);\n}","import \"./pages/index.css\";\nimport { openModal, closeModal } from \"./components/modal.js\";\nimport { createCard, handleDelete, handleLike } from \"./components/card.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\n\nconst validationSettings = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_disabled\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\nimport api from \"./components/api.js\";\nimport {\n  renderLoading,\n  handleSubmit,\n  renderCard,\n} from \"./utils/utils.js\";\n\n// === DOM-элементы ===\nconst buttonEditProfile = document.querySelector(\".profile__edit-button\");\nconst popupEditProfile = document.querySelector(\".popup_type_edit\");\nconst formEditProfile = document.forms[\"edit-profile\"];\nconst inputName = formEditProfile.elements[\"name\"];\nconst inputJob = formEditProfile.elements[\"description\"];\nconst profileName = document.querySelector(\".profile__title\");\nconst profileJob = document.querySelector(\".profile__description\");\n\nconst buttonAddCard = document.querySelector(\".profile__add-button\");\nconst popupAddCard = document.querySelector(\".popup_type_new-card\");\nconst formAddCard = document.forms[\"new-place\"];\n\nconst popupImage = document.querySelector(\".popup_type_image\");\nconst popupImageEl = popupImage.querySelector(\".popup__image\");\nconst popupCaption = popupImage.querySelector(\".popup__caption\");\n\nfunction handleImageClick({ name, link }) {\n  popupImageEl.src = link;\n  popupImageEl.alt = name;\n  popupCaption.textContent = name;\n  openModal(popupImage);\n}\n\nconst cardsContainer = document.querySelector(\".places__list\");\n\ndocument.querySelectorAll(\".popup__close\").forEach((btn) => {\n  const popup = btn.closest(\".popup\");\n  btn.addEventListener(\"click\", () => closeModal(popup));\n});\n\n// Универсальный обработчик профиля\nfunction handleProfileFormSubmit(evt) {\n  function makeRequest() {\n    return api\n      .updateUserInfo({ name: inputName.value, about: inputJob.value })\n      .then((userData) => {\n        profileName.textContent = userData.name;\n        profileJob.textContent = userData.about;\n        closeModal(popupEditProfile);\n      });\n  }\n  handleSubmit(makeRequest, evt);\n}\n\nbuttonAddCard.addEventListener(\"click\", () => {\n  formAddCard.reset();\n  clearValidation(formAddCard, validationSettings);\n  openModal(popupAddCard);\n});\n\nfunction handleAddCardSubmit(evt) {\n  function makeRequest() {\n    const name = formAddCard.elements[\"place-name\"].value;\n    const link = formAddCard.elements[\"link\"].value;\n    return api.addCard({ name, link }).then((cardData) => {\n      renderCard(\n        cardData,\n        {\n          createCard,\n          onDelete: handleDelete,\n          onLike: handleLike,\n          onImageClick: handleImageClick,\n          currentUserId,\n        },\n        cardsContainer,\n        \"prepend\"\n      );\n      closeModal(popupAddCard);\n    });\n  }\n  handleSubmit(makeRequest, evt);\n}\n\nlet currentUserId = null;\nlet cardToDelete = null;\n\n\nPromise.all([api.getUserInfo(), api.getInitialCards()])\n  .then(([userData, cards]) => {\n    currentUserId = userData._id;\n    profileName.textContent = userData.name;\n    profileJob.textContent = userData.about;\n    profileImage.style.backgroundImage = `url('${userData.avatar}')`;\n    cards.forEach((cardData) => {\n      renderCard(\n        cardData,\n        {\n          createCard,\n          onDelete: handleDelete,\n          onLike: handleLike,\n          onImageClick: handleImageClick,\n          currentUserId,\n        },\n        cardsContainer,\n        \"append\"\n      );\n    });\n  })\n  .catch(console.error);\n\nbuttonEditProfile.addEventListener(\"click\", () => {\n  inputName.value = profileName.textContent;\n  inputJob.value = profileJob.textContent;\n  clearValidation(formEditProfile, validationSettings);\n  openModal(popupEditProfile);\n});\n\nformEditProfile.addEventListener(\"submit\", handleProfileFormSubmit);\nformAddCard.addEventListener(\"submit\", handleAddCardSubmit);\n\nenableValidation(validationSettings);\n\n\nconst avatarPopup = document.querySelector(\".popup_type_edit-avatar\");\nconst avatarForm = document.forms[\"edit-avatar\"];\nconst avatarInput = avatarForm.elements[\"avatar\"];\nconst profileImage = document.querySelector(\".profile__image\");\n\nprofileImage.addEventListener(\"click\", () => {\n  avatarForm.reset();\n  clearValidation(avatarForm, validationSettings);\n  openModal(avatarPopup);\n});\n\nfunction handleAvatarFormSubmit(evt) {\n  function makeRequest() {\n    return api.updateAvatar({ avatar: avatarInput.value }).then((userData) => {\n      profileImage.style.backgroundImage = `url('${userData.avatar}')`;\n      closeModal(avatarPopup);\n    });\n  }\n  handleSubmit(makeRequest, evt);\n}\navatarForm.addEventListener(\"submit\", handleAvatarFormSubmit);\n"],"names":["openModal","popupElement","classList","add","setTimeout","document","addEventListener","onEscapeKey","onOverlayClick","closeModal","remove","removeEventListener","event","key","activePopup","querySelector","target","contains","checkResponse","res","ok","json","Promise","reject","concat","status","request","endpoint","options","fetch","then","Api","_ref","headers","_classCallCheck","this","_headers","value","_ref2","name","about","method","body","JSON","stringify","_ref3","link","cardId","_ref4","avatar","authorization","cardTemplateElement","content","handleLike","likeButton","likeCount","isLiked","currentUserId","api","unlikeCard","likeCard","call","updatedCard","toggle","likes","some","user","_id","textContent","length","catch","console","error","handleDelete","cardElement","deleteCard","createCard","data","onImageClick","cloneNode","imageElement","titleElement","deleteButton","src","alt","owner","style","display","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","hasInvalidInput","validity","valid","disabled","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","renderLoading","isLoading","button","buttonText","arguments","undefined","loadingText","handleSubmit","evt","preventDefault","submitButton","submitter","initialText","reset","finally","renderCard","item","callbacks","container","validationSettings","formSelector","buttonEditProfile","popupEditProfile","formEditProfile","forms","inputName","elements","inputJob","profileName","profileJob","buttonAddCard","popupAddCard","formAddCard","popupImage","popupImageEl","popupCaption","handleImageClick","cardsContainer","btn","popup","closest","all","getUserInfo","getInitialCards","userData","cards","profileImage","backgroundImage","cardData","onDelete","onLike","updateUserInfo","addCard","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","avatarPopup","avatarForm","avatarInput","updateAvatar"],"sourceRoot":""}